# Урок 2: Строки

## Unicode и строковые литералы
Каждый символ юникода может иметь различную длину. Например простые символы вроде латинских букв будут иметь длину
в 128 бит (Z = 5A). Более сложные символы вроде букв кириллицы будут иметь большую длину (Я = D0 AF). Спецсимолы
вроде эмоджи могут иметь еще большую длину. В каждом символе юникода в первом байте (???) хранится длина.

```go
s1 := "Hello World"
s2 := "Hello \n World \u9333"

s3 := `Hello
"cruel"
'world'
`
```

### Преобразование строки в слайс байт/рун и итерация по ним
```go
s := "привет"
ba := []byte(s)
ra := []rune(s)
fmt.Printf("% v\b\n", ba)
fmt.Printf("% v\n\n", ra)

// По байтам
for i := 0; i < len(s); i++ {
    b := s[i]
    // i строго последовательно
    // b имеет тип byte, uint8
}

// По рунам
for i, r := range s {
    // i может перепрыгивать значения 1,2,4,6,9...
    // r ­ имеет тип rune, int32
}
```

### Полезные функции из пакета strings
```go
// проверка наличия подстроки
Contains(s, substr string) bool

// строка начинается с ?
HasPrefix(s, prefix string) bool

// склейка строк
Join(a []string, sep string) string

// разбиение по разделителю
Split(s, sep string) []string
```

### Эффективная склейка строк
Т.к. строки read-only, каждая склейка через + или += приводит к выделению памяти. Чтобы оптимизировать число аллокаций
используйте strings.Builder:

```go
import "strings"

var b strings.Builder
for i := 33; i >= 1; i-- {
    b.WriteString("Код")
    b.WriteRune('ъ')
}
result := b.String()
```

### Константы
Константы - неизменяемые значения, доступные только во время компиляции.

```go
const PI = 3		// принимает подходящий тип (не типизированная константа)
const pi float32 = 3.14	// строгий тип
```

Что значит "во время компиляции"?
```go
const HelloConst = 3
var HelloVar = 5
func main() {
    print(HelloVar, HelloConst)
}
```

Скомпилируем и посмотрим символы:
> $ go build ­o 1.out 1.go  
> $ go tool nm 1.out | grep Hello	 tool nm показывает все символы в программе (переменные, функции и т.д.)  
>  10bd148 D main.HelloVar  

Т.е. во время компиляции под переменную _HelloVar_ была выделена память, а значение константы было подставлено
компилятором в код "как есть". Исходя из этого в Го могут существовать не типизированные константы.

[Оглавление](../readme.md) | [Следующая >>](03-slices.md)
